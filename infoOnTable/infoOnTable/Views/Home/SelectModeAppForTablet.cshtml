@model infoOnTable.Models.Врач

@{
    ViewBag.Title = "SelectModeAppForTablet";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


@Scripts.Render("~/scripts/jquery-3.3.1.js")
@Scripts.Render("~/scripts/jquery.validate.min.js")
@Scripts.Render("~/scripts/jquery.unobtrusive-ajax.js")
@Scripts.Render("~/scripts/jquery.unobtrusive-ajax.min.js")



<link href='@Url.Content("~/Content/themes/base/all.css")' rel="stylesheet" type="text/css" />
<script src='@Url.Content("~/Scripts/jquery-ui-1.12.1.min.js")' type="text/javascript"></script>

@if (ViewBag.Mode == "doctor")
{
    <h2>Введите данные о приеме и нажмите кнопку "Готово"</h2>

    <table>
        <tr>
            <td>
                <p>
                    <!--Html.CheckBox("ready", false)-->
                    <input id="ready" name="ready" type="checkbox" value="false" />

                    @Html.DisplayName("Отметьте данное поле, если готовы принять пациента")
                </p>
            </td>
        </tr>
        <tr>
            <td><p>ФИО пациента (можно ввести что-то одно: ФИО или талон): </p></td>
            <td><input type="text" id="name" name="name" /> </td>
        </tr>
        <tr>
            <td><p>№ талона:</p></td>
            <td><input type="text" id="number" name="number" /> </td>
        </tr>

    </table>

    <div class="col-md-offset-2 col-md-10">
        <input type="button" id="ok" name="ok" value="Готово" class="btn btn-default" />
    </div>

    <div id="infoForDoctor">
        <br/>
    </div>

    @section scripts{
        <script type="text/javascript">
            $(function () {

                $('#ok').click(function () {

                    let info="";
                    if ($('#ready').is(':checked')) {
                  //      info = "true" + "/" + $('#name').val() + "/" + $('#number').val();
                        info = "true";
                    }
                    else {
                  //      info = "false" + "/" + $('#name').val() + "/" + $('#number').val();
                        info = "false";
                    }
                    
                    var data = JSON.stringify({
                        'info': info,
                        'name': $('#name').val(),
                        'number': $('#number').val(),
                        'idDoctor': @ViewBag.idDoctor,
                        'idRoom': @ViewBag.idRoom
                    });
                       $.ajax({
                        type: 'POST',
                        url: '@Url.Action("infoForPatien")',
                        data: data,
                        contentType: 'application/json',
                        success: function (data) {

                            // заменяем содержимое присланным частичным представлением
                            $('#infoForDoctor').replaceWith(data);
                           }
                        
                    });

                });
            })
        </script>
    }
}

else if (ViewBag.Mode == "user")
{

}

